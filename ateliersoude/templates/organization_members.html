{% extends 'organization_page.html' %}
{% load static bootstrap4 assets thumbnail initialavatar app_filters %}
{% load querystring from django_tables2 %}
{% load django_tables2 %}

{% block title %}Page de {{organization.name}}: gestion des membres{% endblock %}

{% block menu_content %}
  <section class="container">
    <h2 class="text-center p-4">Membres adhérents de {{organization}}</h2>
  </section>
  <section class="container">
    <div class="col-lg">
      <div class="card mb-4 text-center">
        <button class="btn btn-success" data-toggle="modal" data-target="#more-info-{{ anonymous_user.pk }}">
          <i class="fa fa-plus"></i>
          Ajouter un membre
        </button>
        {% include "user/organization/modal_more_info.html" with object=organization form=add_member_form %}
      </div>
      {% if filter %}
      <div class="card mb-4 text-center">
        <form action="" method="get" class="form-inline justify-content-center form-xs">
          <h4 class="d-block w-100">Rechercher</h4>
            {% bootstrap_form filter.form %}
            <a class="btn-secondary w-100">{% bootstrap_button 'filtrer' %}</a>
        </form>
      </div>
      {% endif %}
      <div class="border border-primary mb-5">
        <span class="float-right">Télécharger le résultat :
          <a class="btn btn-success btn-sm" href="{% querystring '_export'='csv' %}">CSV</a>
          <a class="btn btn-success btn-sm" href="{% querystring '_export'='ods' %}">ODS</a>
        </span>
        {% render_table table %}
      </div>
    </div>
  </section>
{% endblock menu_content %}

{% block extra_js %}
  <script>
    $(document).ready(function(){
      $("#h_nav").sticky({topSpacing:40});
      $("#side_nav").sticky({topSpacing:80});
      $("#breadcrumb").sticky({topSpacing:0});
    });
  </script>
  {% assets "js_detail_organization" %}
    <script src="{{ ASSET_URL }}"></script>
  {% endassets %}
{% endblock extra_js %}