{% extends 'list_view.html' %}

{% load staticfiles %}
{% load fontawesome %}
{% load avatar_tags %}
{% load django_bootstrap_breadcrumbs %}
{% load easy_maps_tags %}


{% block breadcrumbs %}
  {% with type="events" view="event_list" %}
    {{ block.super }}
  {% endwith %}
{% endblock %}

{% block title %}
  {{ block.super }}
  Events
{% endblock title %}

{% block statistics %}
  {% with first_value=event_list.all.count first_label='events' second_value=event_list.all.attendees.count second_label='participations' third_value=event_list.type.all.count third_label='types' %}
  {{block.super}}
  {% endwith %}
{% endblock statistics %}

{% block list %}

<section id="event-list" class="container-fluid row">
<div class="col-lg-12 col-sm-12 ml-4 py-2">

    <div v-for="(event in event_list" class="float-left col-lg-4 col-md-6 col-sm-1">
     <!-- doing something with this 
     <h5 v-if="last_date_str != event.month_str"> [[event.month_str ]] </h5>
     -->

      {% include "plateformeweb/event_vuejs.html" with class="" img_class="col-md-4" about_class="col-md-8 pb-2" %}

    </div>
   <div v-if="event_list.length == 0">No events yet.</div>

  </div>

</section>

<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.16/vue.js"></script>
<script>
  const app = new Vue({
      delimiters: ['[[', ']]'],
      el: "#event-list",
      data() {
          return {
              event_list : [],
              organizations: {},
              places: {},
              last_date_str: "",
          }
      },
      created() {
          fetch("/api/list_events/")
              .then(response => response.json())
              .then(json => {
                  this.event_list = json.dates;
                  this.organizations = json.organizations;
                  this.places = json.places;
              });
      },
  });
</script>
{% endblock list %}
